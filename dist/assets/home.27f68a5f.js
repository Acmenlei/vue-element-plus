import{i as t,h as s,o as e,k as a,l as n,t as o,u as l,w as u,v as c,q as i,F as d,s as r,p as v,n as p,x as f,e as h}from"./vendor.c394a280.js";import{u as k,g as b,U as m,_ as T}from"./index.d7c340ad.js";const y="https://getpantry.cloud/apiv1/pantry/50d468e6-7cc6-4960-839d-3f5ebf478688/basket/users";function g(){let s=t([]),e=t(""),a=t(-1);async function n(){let t=k();const e=t.users;for(let n=e.length-1;n>=0;n--)if(e[n].username==t.username){e[n].tasks=s.value;break}var a;await(a={users:e},new Promise((t=>{let s=new Headers;s.append("Content-Type","application/json"),fetch(y,{method:"POST",body:JSON.stringify(a),headers:s}).then((s=>s.json().then((s=>t(s)))))})))}return{queryTodo:async function(){const t=await new Promise((t=>{fetch(y).then((s=>s.json().then((s=>t(s)))))}));k().updateUsers(t.users);const e=b(m);for(let a of t.users)if(e==a.username){s.value=a.tasks;break}},submitTodo:async function(){-1==a.value?s.value.push({status:"to-do",name:e.value}):(s.value[a.value].name=e.value,a.value=-1),e.value="",n()},changeTodo:async function(t){switch(s.value[t].status){case"finished":s.value[t].status="in-progress";break;case"to-do":s.value[t].status="finished";break;case"in-progress":s.value[t].status="to-do"}n()},deleteTodo:async function(t){s.value.splice(t,1),n()},editTodo:function(t){e.value=s.value[t].name,a.value=t},tasks:s,task:e}}const x=t=>(v("data-v-7cf2c399"),t=t(),p(),t),C={class:"todo-list"},w={class:"text-center"},j={class:"flex-container"},U={class:"tasks"},O=x((()=>n("thead",null,[n("tr",null,[n("th",null,"Task"),n("th",null,"Status"),n("th",null,"Del"),n("th",null,"Edit")])],-1))),S=["onClick"],q={class:"text-center"},P=["onClick"],_=[x((()=>n("button",{class:"btn del-btn"},"del",-1)))],E={class:"text-center"},I=["onClick"],L=[x((()=>n("button",{class:"btn edit-btn"},"edit",-1)))];var B=T(s({setup(t){const{tasks:s,task:v,queryTodo:p,submitTodo:h,changeTodo:b,deleteTodo:m,editTodo:T}=g();function y(){k().logout()}return p(),(t,p)=>(e(),a("div",C,[n("h2",w,o(l(k)().username)+" 's Todo List",1),n("div",j,[u(n("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=t=>i(v)?v.value=t:null),placeholder:"Enter task"},null,512),[[c,l(v)]]),n("button",{class:"submit-btn",onClick:p[1]||(p[1]=(...t)=>l(h)&&l(h)(...t))}," SUBMIT ")]),n("table",U,[O,n("tbody",null,[(e(!0),a(d,null,r(l(s),((t,s)=>(e(),a("tr",{key:s},[n("td",null,[n("span",{class:f({"line-through":"finished"===t.status})},o(t.name),3)]),n("td",null,[n("span",{class:f(["pointer noselect",{"text-danger":"to-do"===t.status,"text-success":"finished"===t.status,"text-warning":"in-progress"===t.status}]),onClick:t=>l(b)(s)},o(t.status),11,S)]),n("td",q,[n("div",{onClick:t=>l(m)(s)},_,8,P)]),n("td",E,[n("div",{onClick:t=>l(T)(s)},L,8,I)])])))),128))])]),n("div",{class:"logout"},[n("button",{onClick:y},"LOGOUT")])]))}}),[["__scopeId","data-v-7cf2c399"]]);const D=s({setup:t=>(t,s)=>(e(),h(B))});export{D as default};
