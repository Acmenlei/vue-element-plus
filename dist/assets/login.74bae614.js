import{g as e,h as s,i as a,j as n,o as r,k as t,l as o,w as l,v as i,u,F as c,p as d,n as p}from"./vendor.c394a280.js";import{u as v,r as m,s as f,e as h,_ as S}from"./index.d7c340ad.js";const g="https://getpantry.cloud/apiv1/pantry/50d468e6-7cc6-4960-839d-3f5ebf478688/basket/users";var y,w,E,_,R;function U(){let s=e({username:"",password:""});return{loginForm:s,login:async function(){try{let e=await new Promise((e=>{fetch(g).then((s=>s.json().then((s=>e(s)))))})),a="";for(let{username:n,password:r}of e.users)if(n==s.username){a=r;break}if(a){if(a==s.password){v().login(s.username,e.users),m.replace("/home"),f("登陆结果提示",w.SUCCESS)}else h("登陆结果提示",w.REASON)}else h("登陆结果提示",w.NOT_EXIST_USER)}catch{h("网络提示",y.NETWORK_ERROR)}s.username="",s.password=""}}}function k(s){let a=e({username:"",password:""});return{registerForm:a,register:async function(){var e;let n=v();for(let{username:s}of n.users)if(s==a.username)return void h("注册提示",_.HAS_EXIST_USER);var r;n.users.push({username:a.username,password:a.password,tasks:[]}),await(r={users:n.users},new Promise((e=>{let s=new Headers;s.append("Content-Type","application/json"),fetch(g,{method:"POST",body:JSON.stringify(r),headers:s}).then((s=>s.json().then((s=>e(s))).catch((s=>e(s)))))}))),f("注册提示",_.SUCCESS),null==(e=s.value)||e.click(),a.username="",a.password=""}}}(y||(y={})).NETWORK_ERROR="网络发生了一点小故障，请检查网络问题再来试试吧～",(E=w||(w={})).SUCCESS="登陆成功！",E.REASON="登陆失败",E.NOT_EXIST_USER="账号不存在!",(R=_||(_={})).HAS_EXIST_USER="该用户已经存在了，冲重新选择一个用户名！",R.SUCCESS="注册成功, 快去登陆吧!";const C=e=>(d("data-v-208ee584"),e=e(),p(),e),O=C((()=>o("p",{class:"form-title"},"<<登陆查看我的待办集>>",-1))),T={class:"form-container sign-up-container"},b={action:"javascript:;"},j=C((()=>o("h1",null,"用户注册",-1))),I={class:"form-container sign-in-container"},N={action:"javascript:;"},F=C((()=>o("h1",null,"用户登陆",-1))),x={class:"overlay-container"},A={class:"overlay"},L={class:"overlay-panel overlay-left"},V=C((()=>o("h1",null,"已有帐号？",-1))),X=C((()=>o("p",null,"亲爱的快快点我去进行登陆吧。",-1))),H={class:"overlay-panel overlay-right"},P=C((()=>o("h1",null,"没有帐号？",-1))),B=C((()=>o("p",null,"点击注册去注册一个属于你的账号吧。",-1)));var K=S(s({setup(e){const s=a(),d=a(),p=a();n((()=>{var e,a;null==(e=p.value)||e.addEventListener("click",(()=>{var e;return null==(e=s.value)?void 0:e.classList.add("right-panel-active")})),null==(a=d.value)||a.addEventListener("click",(()=>{var e;return null==(e=s.value)?void 0:e.classList.remove("right-panel-active")}))}));const{login:v,loginForm:m}=U(),{register:f,registerForm:h}=k(d);return(e,a)=>(r(),t(c,null,[O,o("div",{class:"container",ref_key:"container",ref:s,id:"container"},[o("div",T,[o("form",b,[j,l(o("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>u(h).username=e),type:"text",placeholder:"用户名"},null,512),[[i,u(h).username]]),l(o("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>u(h).password=e),autocomplete:"off",type:"password",placeholder:"密码"},null,512),[[i,u(h).password]]),o("button",{onClick:a[2]||(a[2]=(...e)=>u(f)&&u(f)(...e))},"注册")])]),o("div",I,[o("form",N,[F,l(o("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>u(m).username=e),type:"text",placeholder:"用户名"},null,512),[[i,u(m).username]]),l(o("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>u(m).password=e),autocomplete:"off",type:"password",placeholder:"密码"},null,512),[[i,u(m).password]]),o("button",{onClick:a[5]||(a[5]=(...e)=>u(v)&&u(v)(...e))},"登陆")])]),o("div",x,[o("div",A,[o("div",L,[V,X,o("button",{class:"ghost",ref_key:"signInButton",ref:d,id:"signIn"},"登陆",512)]),o("div",H,[P,B,o("button",{class:"ghost",ref_key:"signUpButton",ref:p,id:"signUp"},"注册",512)])])])],512)],64))}}),[["__scopeId","data-v-208ee584"]]);export{K as default};
